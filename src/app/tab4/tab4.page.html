<ion-header class="ion-no-border">
  <ion-toolbar color="light">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Customers</ion-title>
  </ion-toolbar>
</ion-header>

<!-- <ion-header class="ion-no-border">
  <ion-toolbar>
    <div class="segment-item">
      <ion-segment [(ngModel)]="customers" color="secondary" (ionChange)="segmentChanged($event)">
        <ion-segment-button value="0">
          <ion-label>Visited</ion-label>
        </ion-segment-button>
        <ion-segment-button value="1">
          <ion-label>Regular</ion-label>
        </ion-segment-button>
      </ion-segment>
    </div>
  </ion-toolbar>
</ion-header> -->

<ion-content fullscreen>
  <div>
    <ion-row>
      <ion-col size-md="3" size="6">
        <ion-select ok-text="Okay" cancel-text="Cancel" style="border: 1px solid #ea2366;
      border-radius: 5px;
      margin-top: 3px;
      --min-height: 35px;text-align: left;box-shadow: 0px 2px 10px 1px #80808057;color: #ea2366;margin-left: 10px;"
          [(ngModel)]="selectedDate">
          <!-- (ionChange)="onChangeDate($event)" -->
          <ion-select-option [value]="dateType.id"
            *ngFor="let dateType of dateTypeList">{{dateType.name}}</ion-select-option>

        </ion-select>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size-md="4" size="6">
        <ion-card style="background: #ea2366;color: white;">
          <ion-card-header class="title" style="color: white;">Total.</ion-card-header>
          <ion-card-content>
            <div style=" display: flex;
          align-items: center;
          justify-content: space-between;padding-bottom: 10px;">
              <div><ion-label class="title">2</ion-label></div>
              <div class="circle1"></div>
              <!-- <img [src]=" '../../assets/charts2.png' "> -->

            </div>
          </ion-card-content>
          <br>
        </ion-card>
      </ion-col>
      <ion-col size-md="4" size="6">
        <ion-card style="background: #5bc1b7;color: white;
      ">
          <ion-card-header class="title" style="color: white;">New Customer</ion-card-header>
          <ion-card-content>
            <div style=" display: flex;
          align-items: center;
          justify-content: space-between;padding-bottom: 10px;">
              <div><ion-label class="title">100000</ion-label></div>
              <div class="circle2"></div>
              <!-- <img [src]=" '../../assets/revenue.png' "> -->

            </div>
          </ion-card-content>
          <br>

        </ion-card>
      </ion-col>
      <ion-col size-md="4" size="6">
        <ion-card style="background: #2D3079;color: white;
      ">
          <ion-card-header class="title" style="color: white;">High Value Customer </ion-card-header>
          <ion-card-content>
            <div style=" display: flex;
          align-items: center;
          justify-content: space-between;padding-bottom: 10px;">
              <div><ion-label class="title">100000</ion-label></div>
              <div class="circle2"></div>
              <!-- <img [src]=" '../../assets/revenue.png' "> -->

            </div>
          </ion-card-content>
          <br>

        </ion-card>
      </ion-col>
    </ion-row>
    <ion-searchbar style="color: #E82264;" (keyup)="filterCustomerService($event)"
      (ionClear)="filterCustomerService('')"></ion-searchbar>

    <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
      <ion-refresher-content></ion-refresher-content>
    </ion-refresher>
    <div style="    overflow-x: auto;
  box-shadow: 0px 2px 10px 3px #80808057;
  margin: 12px;
  border-radius: 5px;">
      <div>
        <table id="saleslist" class="styled-table">

          <!-- <table id="saleslist" class="table table-striped"> -->
          <thead>
            <tr>
              <th scope="col" *ngFor="let label of customerlabel" style="text-wrap:nowrap;">
                <ion-label style="margin-right: 10px;margin-right: 10px;
        font-weight:bold;
        color: black;">{{label}}</ion-label>
              </th>
            </tr>
          </thead>
          <br>
          <tbody>
            <tr style="border-bottom: 1px gray solid;" *ngFor="let value of displayedBills;index as i"
              (click)="goToTotalVisit()">
              <td class="lbl_center" style="text-wrap:nowrap;padding-bottom: 5px;">
                <ion-label style="font-weight: 600;color: gray;">{{i+1}}</ion-label>

              </td>
              <td class="lbl_center" style="text-wrap:nowrap;padding-bottom: 5px;">
                <ion-label style="font-weight: 600;color: orange;"><ion-icon name="person-outline"
                    style="margin-right: 5px;"></ion-icon>{{value.name}}</ion-label>

              </td>
              <td class="lbl_center" style="text-wrap:nowrap;padding-bottom: 5px;">


                <ion-label style="font-weight: 600;color: darkblue;">{{value.searchMobileNo}}</ion-label>


              </td>
              <td class="lbl_center" style="text-wrap:nowrap;padding-bottom: 5px;">
                <ion-label style="font-weight: 600;color: black;"><span style="    vertical-align: middle;
            margin-right: 5px;color: #ea2366;
           ">20-01-2024</span></ion-label>
                <!-- color: skyblue; -->


              </td>
              <td class="lbl_center" style="text-wrap:nowrap;padding-bottom: 5px;">
                <ion-label style="font-weight: 600;color: black;"><span style="    vertical-align: middle;
            margin-right: 5px;
            color: skyblue;">8</span></ion-label>

              </td>

              <td class="lbl_center" style="text-wrap:nowrap;padding-bottom: 5px;">

                <ion-label style="font-weight: 600;color: darkblue;">Tom</ion-label>


              </td>
              <td class="lbl_center" style="text-wrap:nowrap;padding-bottom: 5px;">
                <ion-label style="    color: #fff;
            background-color: #57B657;
            border-radius: 20px;
            padding-left: 15px;
            padding-right: 15px;
            padding-top: 5px;
            padding-bottom: 5px;">Rs.1000</ion-label>

              </td>
              <td>
                <div style="display: flex">

                  <ion-icon name="eye-outline" style="font-size: x-large;color: #222469;"></ion-icon>
                  <!-- <ion-icon name="trash-outline" (click)="goToBilling(2)" style="font-size: x-large;color: red;"></ion-icon> -->
                </div>
              </td>
            </tr>

          </tbody>



        </table>
      </div>
    </div>
    <ion-row>
      <ion-col style="text-align: right;">
        <ion-button size="small" (click)="prevPage()" [disabled]="currentPage === 1">Previous Page</ion-button>
        <span style="    vertical-align: middle;
      font-weight: 600;
      margin-left: 10px;
      margin-right: 10px;">{{allVisitedCustomers.length>0? currentPage:0}} &nbsp;of&nbsp; {{totalPages()}}</span>
        <ion-button size="small" (click)="nextPage()"
          [disabled]="currentPage === totalPages() || allVisitedCustomers.length==0">Next Page</ion-button>

      </ion-col>
      <!-- <ion-col>
      <ion-button (click)="nextPage()" [disabled]="currentPage === totalPages()">Next Page</ion-button>
    </ion-col> -->
    </ion-row>
  </div>
  <!-- <ion-searchbar style="color: #E82264;" (keyup)="filterCustomerService($event)"
    (ionClear)="filterCustomerService('')"></ion-searchbar>

  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher> -->
  <div hidden>
    <ion-list class="customer-list">
      <ion-item *ngFor="let customer of allVisitedCustomers">
        <ion-label>


          <h2 style="color: #E82264;">{{customer.name}} </h2>
          <p style="color: #222469">{{customer.searchMobileNo}}</p>
        </ion-label>
        <ion-note slot="end" color="primary">
          <a href="tel:{{customer.searchMobileNo}}">
            <ion-icon name="call-outline" style="color: #222469;"></ion-icon>
          </a>
        </ion-note>
      </ion-item>
      <!--Show If No Customers-->
      <div class="no-customers" *ngIf="!Visited || Visited.length === 0">
        <h5>
          <ion-icon name="sad-outline" class="icon-space"></ion-icon><br />
          Currently no customers to show
        </h5>
      </div>

      <!-- <ion-infinite-scroll threshold="100px" (ionInfinite)="loadMoreData($event)">
        <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading...">
        </ion-infinite-scroll-content>
      </ion-infinite-scroll> -->
      <!-- <ion-infinite-scroll *ngIf="pageVisited < totalPageVisited" threshold="100px"
        (ionInfinite)="loadMoreData($event)">
        <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading...">
        </ion-infinite-scroll-content>
      </ion-infinite-scroll> -->
    </ion-list>
  </div>
  <div *ngIf="customers == 0" hidden>
    <ion-list class="customer-list">
      <ion-item *ngFor="let customer of Visited">
        <ion-label>
          <h2>{{customer.firstName}} {{customer.lastName}}</h2>
          <p>{{customer.mobileNo}}</p>
        </ion-label>
        <ion-note slot="end" color="primary">
          <a href="tel:{{customer.mobileNo}}">
            <ion-icon name="call-outline"></ion-icon>
          </a>
        </ion-note>
      </ion-item>
      <!--Show If No Customers-->
      <div class="no-customers" *ngIf="!Visited || Visited.length === 0">
        <h5>
          <ion-icon name="sad-outline" class="icon-space"></ion-icon><br />
          Currently no customers to show
        </h5>
      </div>
      <ion-infinite-scroll *ngIf="pageVisited < totalPageVisited" threshold="100px"
        (ionInfinite)="loadMoreData($event)">
        <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading...">
        </ion-infinite-scroll-content>
      </ion-infinite-scroll>
    </ion-list>
  </div>

  <div *ngIf="customers == 1" hidden>
    <ion-list class="customer-list">
      <ion-item *ngFor="let customer of Regular">
        <ion-label>
          <h2>{{customer.firstName}} {{customer.lastName}}</h2>
          <p>{{customer.mobileNo}}</p>
        </ion-label>
        <ion-note slot="end" color="primary">
          <a href="tel:{{customer.mobileNo}}">
            <ion-icon name="call-outline">
              <!-- <a href="tel:{{customer.mobileNo}}">
                          </a> -->
            </ion-icon></a>
        </ion-note>
      </ion-item>
      <!--Show If No Customers-->
      <div class="no-customers" *ngIf="!Regular || Regular.length === 0">
        <h5>
          <ion-icon name="sad-outline" class="icon-space"></ion-icon><br />
          Currently no customers to show
        </h5>
      </div>
      <ion-infinite-scroll *ngIf="pageRegular < totalPageRegular" threshold="100px"
        (ionInfinite)="loadMoreDataRegular($event)">
        <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading...">
        </ion-infinite-scroll-content>
      </ion-infinite-scroll>
    </ion-list>
  </div>
</ion-content>